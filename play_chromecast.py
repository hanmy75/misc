import time
import pychromecast

#MEDIA_URL = "http://119.205.216.29/smfm/_definst_/mfm.stream/playlist.m3u8?id=2101&si=3&secure=ODc3OTcxMjM2ZjUzOWRhODg3ODIxMWRmNjZhYzc3ZjliYjdlMWU0OTY5ZTJjMTEwYjc4ZGMwOTcxMDQyODEzZjc3Y2YxMjczZjAyMWE2NDE0OGMxMTIyYmUxOTQ3ZjhmOGVlNGZjMDY5MjAxMGU0ODg1ODk1ZmI4MDUzMTZhNmUwYmMwOTg0OWU3MWM1NWY2NGYxYzI0OTY4OWZlODBlNmM5ZDkwYmZhODlkZmM1M2RjZjdlMjA3ODA1NTA3NTBkZjI2NWY5MGQ4OGJiODQ2NGNkYTdiYzc1OTQ2Y2JhOTA3NjY2MDc4ODA5ZTU2ZjY5NWU2ZDI2Y2RlYzI0NmIyZmMyN2NiYThhMTZkNmY5NDAzNDlhZjNlOTg2NWQ5NGFmMmMwNTZlYWY5MDI0ZjczZg==&csu=false"
#MEDIA_URL = "http://radiolive.sbs.co.kr/powerpc/powerfm.stream/playlist.m3u8?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE1ODM5MDUxMjAsInBhdGgiOiIvcG93ZXJmbS5zdHJlYW0iLCJkdXJhdGlvbiI6LTEsInVubyI6IjA5NmZiZmQyLWIzNGItNDkwNy1hMzcwLWFiZDcyYWU1NDFiZSJ9.fwk3N_rKyC7AXp4Sc_e7jioliMr7BCx_XG5RiY_powQ"
#MEDIA_URL = "http://172.30.1.9/media-ucc99e8zg_132629.ts"
#MEDIA_URL = "http://1fm.gscdn.kbs.co.kr/1fm_192_1.m3u8?Expires=1585630981&Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cDovLzFmbS5nc2Nkbi5rYnMuY28ua3IvMWZtXzE5Ml8xLm0zdTgiLCJDb25kaXRpb24iOnsiRGF0ZUxlc3NUaGFuIjp7IkFXUzpFcG9jaFRpbWUiOjE1ODU2MzA5ODF9fX1dfQ__&Signature=Gb-dV7EuQSRVHFsiuVWHPXwa8ZpSdXdOs2N3fm6UiuKsjw5-Lts8aG7vugZCVF7uBvlQqdbCzCd2m~1XqdfDCbEUUTe2nya1V0K1NqMtvbibSrPCy240mzKr-c4wmPb3Zjjblp2tvTQ5SawSIOIwyriL2SMhW1cAP647Ds7S3aFjtSNfoKdbRnqdOL2ARav7lE14tJlp~M3zEpIwv81Of2jPOYdqDVtaHbTGg4sEl2wwhNQOyZlmgZRAis1nwidi6Gmkt9~ZlmZ6xRzFYaKhhh0UhPmDS4xNzEaRchx75cX4xiGvb49oMxPJS5CmuKhiCcBwq--iDZnJfAuy5i8sPA__&Key-Pair-Id=APKAICDSGT3Y7IXGJ3TA"
#MEDIA_URL = "http://1fm.gscdn.kbs.co.kr/1fm_192_1.m3u8?Expires=1585993595&Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cDovLzFmbS5nc2Nkbi5rYnMuY28ua3IvMWZtXzE5Ml8xLm0zdTgiLCJDb25kaXRpb24iOnsiRGF0ZUxlc3NUaGFuIjp7IkFXUzpFcG9jaFRpbWUiOjE1ODU5OTM1OTV9fX1dfQ__&Signature=Jj2wc8Nwj8VeuTJSInpr1eM4AixGUASJkWypwrLqyfnU1e3uHv~drfBFts5f0Huz0YfE8DQNByVt20AW3tL5Lq4bJUOHthHDxJSdYI18aSqHHhCRXvrAn9PNd07XNZBsdkmG42NoZjHCAJxUfDpTjvcOFW0Se7OL6p7nDDAdK2gk0JZ7cYDig67~FJAnJHF8GacT2ur1VeOBiNhYWSbRlOa3ariGgVjPvMxvjW2y1LM1insrKWNTEkaX4nehLyhthHE9DLxEM2ewn5rgTmdUYFjpByhFjy4saNtgvZolxwR6yzD5xF02SHBLwqohmLPig4YBY6WZuCLw3pDFlNQ-Hw__&Key-Pair-Id=APKAICDSGT3Y7IXGJ3TA"
#MEDIA_URL = "http://radiolive.sbs.co.kr/lovepc/lovefm.stream/playlist.m3u8?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE1ODQyNzI3NjEsInBhdGgiOiIvbG92ZWZtLnN0cmVhbSIsImR1cmF0aW9uIjotMSwidW5vIjoiOGQyOWFlM2UtOWRhNy00NTU5LWExOTktYjYwYTliZDFmNjIwIn0.v2deinxmd2xA2eF3evEAUmPf85tguAgRMiFc_s3_XNE"
MEDIA_URL = "http://119.205.216.27/ssfm/_definst_/sfm.stream/chunklist.m3u8?csu=false&wowzasessionid=782573916&tid=4106c27b65a6c77d8d9acbb5d018cc81"


chromecasts = pychromecast.get_chromecasts()
print(chromecasts)

cast = next(cc for cc in chromecasts if cc.device.friendly_name == "MY Mini")
cast.wait()
print(cast.device)

mc = cast.media_controller
mc.play_media(MEDIA_URL, 'audio/aac')
mc.block_until_active()

mc.play()
print(mc)
